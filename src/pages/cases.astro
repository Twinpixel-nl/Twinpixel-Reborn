---
import BaseLayout from "../layouts/BaseLayout.astro";
import Button from "../components/Button.astro";
import CaseCard from "../components/CaseCard.astro";
import { cases } from "../data/cases.js";

const featured = cases.filter((c) => c.featured).slice(0, 3);
const featuredSlugs = new Set(featured.map((c) => c.slug));
const rest = cases.filter((c) => !featuredSlugs.has(c.slug));

// SVG Helper voor de featured cards
const icons = {
  chart: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"></polyline><polyline points="16 7 22 7 22 13"></polyline></svg>`,
  users: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle></svg>`,
  plus: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>`,
};
---

<BaseLayout title="Twinpixel | Cases" description="Cases van Twinpixel: design, performance en SEO.">
  <section class="hero">
    <div class="container">
      <p class="kicker">Portfolio</p>
      <h1 class="h1">Geselecteerd Werk</h1>
      <p class="lead">
        Van beauty platforms tot politieke portalen: wij bouwen digitale ervaringen die converteren.
      </p>

      <div class="cta">
        <Button href="/contact" variant="primary" label="Project starten" />
        <Button href="/expertise" variant="secondary" label="Wat we doen" />
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <div class="featured-grid">
        {featured.map((c, i) => (
          <a
            href={`/cases/${c.slug}`}
            class:list={["fc", i === 0 ? "fc-large" : "fc-small"]}
            style={`--accent:${c.accent};`}
          >
            <div class="fc-content">
              <div class="fc-top">
                <span class="fc-badge">{i === 0 ? "Featured" : "Spotlight"}</span>
                <div class="fc-dot"></div>
              </div>
              
              <h3 class="fc-title">{c.title}</h3>
              <p class="fc-text">{c.description}</p>
              
              <!-- Stats Sectie -->
              <div class="fc-stats">
                {c.stats?.slice(0, c.slug === 'by-britt-nails' ? 3 : 2).map(s => (
                  <div class="fc-pill">
                    <span class="fc-icon" set:html={icons[s.icon]} />
                    <span class="fc-val">{s.value}</span>
                    <span class="fc-lab">{s.label}</span>
                  </div>
                ))}
              </div>

              <!-- Extra uitleg (Alleen bij Britt, onder de stats, minder fel) -->
              {c.slug === 'by-britt-nails' && c.extra && (
                <div class="fc-extra-box">
                  <p class="fc-extra-text">{c.extra}</p>
                </div>
              )}
            </div>

            <!-- Afbeelding (niet op de 3e card om ruimte te besparen) -->
            {i !== 2 && c.image && (
              <div class="fc-image-wrap">
                <img src={c.image} alt={c.title} class="fc-img" />
              </div>
            )}
            
            <div class="fc-footer">Case bekijken ↗</div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <section class="section pt-0">
    <div class="container">
      <div class="subhead">
        <h2 class="h2">Alle Projecten</h2>
        <div class="line"></div>
      </div>

      <div class="main-grid">
        {rest.map((c) => (
          <CaseCard
            title={c.title}
            description={c.description}
            tags={c.tags}
            image={c.image}
            accent={c.accent}
            href={`/cases/${c.slug}`}
          />
        ))}
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  /* --- Hero & Algemeen --- */
  .hero { padding: 160px 0 60px; }
  .kicker { font-size: 12px; letter-spacing: 2px; text-transform: uppercase; color: var(--muted2); margin-bottom: 16px; font-weight: 600; }
  .h1 { margin: 0; font-size: clamp(44px, 5.2vw, 74px); letter-spacing: -0.05em; line-height: 1.02; font-weight: 650; }
  .lead { font-size: 19px; color: var(--muted); margin-top: 24px; max-width: 600px; line-height: 1.6; }
  .cta { display: flex; gap: 16px; margin-top: 40px; }
  .pt-0 { padding-top: 0; }

  /* --- Featured Grid --- */
  .featured-grid {
    display: grid;
    grid-template-columns: 1.2fr 0.8fr;
    grid-template-rows: auto auto;
    gap: 20px;
  }
  
  .fc {
    text-decoration: none;
    background: var(--card);
    border: 1px solid var(--stroke);
    border-radius: var(--radius);
    padding: 32px;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transition: all 0.4s cubic-bezier(0.2, 1, 0.3, 1);
  }

  .fc:hover { border-color: var(--accent); background: rgba(255,255,255,0.05); transform: translateY(-4px); }
  .fc-large { grid-row: span 2; min-height: 520px; }
  
  .fc-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
  .fc-badge { font-size: 10px; text-transform: uppercase; letter-spacing: 1.5px; color: var(--muted2); font-weight: 600; }
  .fc-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--accent); box-shadow: 0 0 15px var(--accent); }
  
  .fc-title { font-size: 28px; font-weight: 700; color: var(--text); margin: 0 0 12px; letter-spacing: -0.02em; }
  .fc-text { font-size: 16px; color: var(--muted); line-height: 1.6; max-width: 440px; margin: 0; }

  /* Stats */
  .fc-stats { display: flex; gap: 12px; margin-top: 24px; flex-wrap: wrap; }
  .fc-pill { 
    background: rgba(255,255,255,0.03); 
    padding: 6px 12px; 
    border-radius: 100px; 
    display: flex; 
    align-items: center; 
    gap: 8px;
    border: 1px solid var(--stroke);
  }
  .fc-icon { width: 14px; height: 14px; color: var(--accent); display: flex; opacity: 0.8; }
  .fc-val { font-weight: 700; color: var(--text); font-size: 13px; }
  .fc-lab { font-size: 11px; color: var(--muted2); }

  /* Extra Uitleg Box (Nieuw & Rustig) */
  .fc-extra-box {
    margin-top: 24px;
    padding-top: 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.06);
  }
  .fc-extra-text {
    font-size: 13px;
    line-height: 1.6;
    color: rgba(255, 255, 255, 0.4); /* Subtiel grijs */
    margin: 0;
    max-width: 500px;
    /* Kap af na 5 regels om de kaart niet té lang te maken */
    display: -webkit-box;
    -webkit-line-clamp: 5;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Image styling */
  .fc-image-wrap { margin-top: auto; padding-top: 40px; }
  .fc-img { 
    width: 100%; 
    border-radius: calc(var(--radius) - 4px); 
    object-fit: cover; 
    aspect-ratio: 16/10; 
    border: 1px solid var(--stroke);
    opacity: 0.9;
  }

  .fc-footer { margin-top: 24px; font-weight: 600; color: var(--text); font-size: 14px; opacity: 0; transition: 0.3s; transform: translateY(10px); }
  .fc:hover .fc-footer { opacity: 1; transform: translateY(0); }

  /* Rest van de grid */
  .subhead { margin: 40px 0 40px; display: flex; align-items: center; gap: 24px; }
  .line { height: 1px; flex: 1; background: var(--stroke); }
  .main-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; }

  @media (max-width: 1024px) {
    .featured-grid, .main-grid { grid-template-columns: 1fr; }
    .fc-large { grid-row: auto; min-height: unset; }
  }
</style>