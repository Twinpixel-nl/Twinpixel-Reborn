---
import BaseLayout from "../layouts/BaseLayout.astro";
import Button from "../components/Button.astro";
import CaseCard from "../components/CaseCard.astro";
import { cases } from "../data/cases.js";

const featured = cases.filter((c) => c.featured).slice(0, 3);
const featuredSlugs = new Set(featured.map((c) => c.slug));
const rest = cases.filter((c) => !featuredSlugs.has(c.slug));

// SVG Helper voor de featured cards
const icons = {
  chart: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"></polyline><polyline points="16 7 22 7 22 13"></polyline></svg>`,
  users: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle></svg>`,
  plus: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>`,
};
---

<BaseLayout title="Twinpixel | Cases" description="Cases van Twinpixel: design, performance en SEO.">
  <section class="hero">
    <div class="container hero-inner">
      <p class="kicker">Portfolio</p>
      <h1 class="h1">Geselecteerd Werk</h1>
      <p class="lead">
        Van beauty platforms tot politieke portalen: wij bouwen digitale ervaringen die converteren.
      </p>

      <div class="cta">
        <Button href="/#contact" variant="primary" label="Project starten" />
        <Button href="/expertise" variant="secondary" label="Wat we doen" />
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <div class="featured-grid">
        {featured.map((c, i) => (
          <a
            href={`/cases/${c.slug}`}
            class:list={["fc", i === 0 ? "fc-large" : "fc-small"]}
            style={`--accent:${c.accent};`}
          >
            <div class="fc-content">
              <div class="fc-top">
                <span class="fc-badge">{i === 0 ? "Featured" : "Spotlight"}</span>
                <div class="fc-dot"></div>
              </div>
              
              <h3 class="fc-title">{c.title}</h3>
              <p class="fc-text">{c.description}</p>

              <div class="fc-stats">
                {c.stats.slice(0, 2).map(s => (
                  <div class="fc-pill">
                    <span class="fc-icon" set:html={icons[s.icon]} />
                    <span class="fc-val">{s.value}</span>
                    <span class="fc-lab">{s.label}</span>
                  </div>
                ))}
              </div>
            </div>

            {i !== 2 && c.image && (
              <div class="fc-image-wrap">
                <img src={c.image} alt={c.title} class="fc-img" />
              </div>
            )}
            
            <div class="fc-footer">Case bekijken â†—</div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <div class="subhead">
        <h2 class="h2">Alle Projecten</h2>
        <div class="line"></div>
      </div>

      <div class="main-grid">
        {rest.map((c) => (
          <CaseCard
            title={c.title}
            description={c.description}
            tags={c.tags}
            image={c.image}
            accent={c.accent}
            href={`/cases/${c.slug}`}
          />
        ))}
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  /* --- Hero --- */
  .hero {
    padding: 160px 0 80px;
    background: radial-gradient(circle at 0% 0%, rgba(255,255,255,0.03), transparent 40%);
  }
  .kicker { font-size: 12px; letter-spacing: 2px; text-transform: uppercase; color: rgba(255,255,255,0.4); margin-bottom: 16px; }
  .h1 { font-size: clamp(48px, 6vw, 72px); font-weight: 800; letter-spacing: -0.04em; margin: 0; }
  .lead { font-size: 19px; color: rgba(255,255,255,0.6); margin-top: 24px; max-width: 600px; line-height: 1.6; }
  .cta { display: flex; gap: 16px; margin-top: 40px; }

  /* --- Featured Grid --- */
  .featured-grid {
    display: grid;
    grid-template-columns: 1.2fr 0.8fr;
    grid-template-rows: auto auto;
    gap: 20px;
  }
  
  .fc {
    text-decoration: none;
    background: rgba(255,255,255,0.02);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 24px;
    padding: 32px;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transition: all 0.4s cubic-bezier(0.2, 1, 0.3, 1);
  }

  .fc:hover { border-color: var(--accent); background: rgba(255,255,255,0.04); }

  .fc-large { grid-row: span 2; min-height: 500px; }
  
  .fc-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
  .fc-badge { font-size: 10px; text-transform: uppercase; letter-spacing: 1.5px; color: rgba(255,255,255,0.4); }
  .fc-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--accent); box-shadow: 0 0 15px var(--accent); }
  
  .fc-title { font-size: 28px; font-weight: 700; color: #fff; margin-bottom: 12px; }
  .fc-text { font-size: 16px; color: rgba(255,255,255,0.6); line-height: 1.6; max-width: 400px; }

  .fc-stats { display: flex; gap: 12px; margin-top: 32px; flex-wrap: wrap; }
  .fc-pill { 
    background: rgba(255,255,255,0.04); 
    padding: 8px 14px; 
    border-radius: 100px; 
    display: flex; 
    align-items: center; 
    gap: 8px;
    border: 1px solid rgba(255,255,255,0.05);
  }
  .fc-icon { width: 14px; color: var(--accent); }
  .fc-val { font-weight: 700; color: #fff; font-size: 14px; }
  .fc-lab { font-size: 11px; color: rgba(255,255,255,0.4); }

  .fc-image-wrap { margin-top: auto; padding-top: 40px; }
  .fc-img { width: 100%; border-radius: 12px; object-fit: cover; aspect-ratio: 16/9; }

  .fc-footer { margin-top: 24px; font-weight: 600; color: #fff; font-size: 14px; opacity: 0; transition: 0.3s; transform: translateY(10px); }
  .fc:hover .fc-footer { opacity: 1; transform: translateY(0); }

  /* --- Main Grid --- */
  .subhead { margin: 80px 0 40px; display: flex; align-items: center; gap: 24px; }
  .line { height: 1px; flex: 1; background: rgba(255,255,255,0.1); }
  .main-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 24px;
  }

  @media (max-width: 1024px) {
    .featured-grid, .main-grid { grid-template-columns: 1fr; }
    .fc-large { grid-row: auto; min-height: 400px; }
  }
</style>